---
title: "Proposal Requirements"
weight: 1
---

# Proposal Requirements

Signals boards can configure proposal requirements to control who can create new initiatives based on token holdings. Requirements are set during board initialization and are immutable thereafter.

## Requirement Types

Signals supports three types of proposal requirements:

### None

No restrictions - anyone with sufficient tokens to meet the `proposalThreshold` can propose initiatives.

**Use case:** Open, permissionless boards where you want maximum participation.

**Configuration:**
```solidity
ProposalRequirements({
    requirementType: ProposalRequirementType.None,
    minBalance: 0,
    minHoldingDuration: 0
})
```

### MinBalance

Users must hold a minimum token balance to propose initiatives. The balance check happens at the time of proposal.

**Use case:** Boards that want to ensure proposers have skin in the game.

**Configuration:**
```solidity
ProposalRequirements({
    requirementType: ProposalRequirementType.MinBalance,
    minBalance: 10_000 * 1e18,  // 10,000 tokens
    minHoldingDuration: 0
})
```

**Notes:**
- The `minBalance` must be greater than 0
- Works with any ERC20 token
- Balance check is separate from `proposalThreshold` (the amount needed to pay for proposing)

### MinBalanceAndDuration

Users must hold a minimum token balance for a minimum duration (measured in blocks) before they can propose initiatives.

**Use case:** Boards that want to prevent flash-loan attacks or ensure proposers are long-term community members.

**Configuration:**
```solidity
ProposalRequirements({
    requirementType: ProposalRequirementType.MinBalanceAndDuration,
    minBalance: 10_000 * 1e18,  // 10,000 tokens
    minHoldingDuration: 100     // 100 blocks (~20 minutes on mainnet)
})
```

**Notes:**
- Both `minBalance` and `minHoldingDuration` must be greater than 0
- **Requires ERC20Votes tokens** - The underlying token must implement the `IVotes` interface with checkpoint functionality
- Standard ERC20 tokens will revert with: `"Token does not support holding duration checks"`
- Uses `getPastVotes()` to verify historical balances

## Interface

### Data Structures

```solidity
enum ProposalRequirementType {
    None,                    // No requirements
    MinBalance,              // Requires minimum token balance
    MinBalanceAndDuration    // Requires min balance held for min duration
}

struct ProposalRequirements {
    ProposalRequirementType requirementType;
    uint256 minBalance;           // Minimum tokens required
    uint256 minHoldingDuration;   // Minimum blocks to hold tokens
}
```

### Functions

#### getProposalRequirements()

Returns the current proposal requirements configuration.

```solidity
function getProposalRequirements()
    external
    view
    returns (ProposalRequirements memory);
```

#### canPropose(address)

Checks if an address meets the proposal requirements.

```solidity
function canPropose(address proposer)
    public
    view
    returns (bool);
```

**Returns:**
- `true` if the address can propose
- `false` if requirements are not met

**Usage:**
```solidity
if (signals.canPropose(msg.sender)) {
    // User can propose
} else {
    // Show error message
}
```

## Initialization

Proposal requirements are configured during board initialization via the `SignalsConfig` struct:

```solidity
SignalsConfig memory config = SignalsConfig({
    version: "1.0",
    owner: msg.sender,
    underlyingToken: address(token),
    proposalThreshold: 50_000 * 1e18,
    acceptanceThreshold: 100_000 * 1e18,
    maxLockIntervals: 12,
    proposalCap: 100,
    lockInterval: 1 days,
    decayCurveType: 0,
    decayCurveParameters: new uint256[](1),
    proposalRequirements: ProposalRequirements({
        requirementType: ProposalRequirementType.MinBalance,
        minBalance: 10_000 * 1e18,
        minHoldingDuration: 0
    })
});

signals.initialize(config);
```

## Error Handling

When proposal requirements are not met, transactions revert with:

```solidity
error ProposalRequirementsNotMet(string reason);
```

**Possible reasons:**
- `"Insufficient token balance for proposal"` - User doesn't have enough tokens
- `"Tokens not held long enough"` - User hasn't held tokens for the required duration
- `"Token does not support holding duration checks"` - ERC20Votes required for duration checks
- `"MinBalance must be greater than 0"` - Invalid configuration
- `"MinHoldingDuration must be greater than 0"` - Invalid configuration

## Examples

### Open Community Board

```solidity
// Anyone with proposalThreshold can propose
ProposalRequirements({
    requirementType: ProposalRequirementType.None,
    minBalance: 0,
    minHoldingDuration: 0
})
```

### Staked Governance Board

```solidity
// Must hold 100k tokens to propose
ProposalRequirements({
    requirementType: ProposalRequirementType.MinBalance,
    minBalance: 100_000 * 1e18,
    minHoldingDuration: 0
})
```

### Long-term Member Board

```solidity
// Must hold 50k tokens for at least 7 days
ProposalRequirements({
    requirementType: ProposalRequirementType.MinBalanceAndDuration,
    minBalance: 50_000 * 1e18,
    minHoldingDuration: 50400  // ~7 days at 12s blocks
})
```

## Implementation Details

Proposal requirements are enforced via the `meetsProposalRequirements()` modifier, which is applied to:
- `proposeInitiative()`
- `proposeInitiativeWithLock()`

The requirements check happens **before** the `proposalThreshold` check, ensuring users meet eligibility criteria before spending tokens to propose.

## Relationship to Proposal Threshold

Proposal requirements and proposal threshold serve different purposes:

- **Proposal Requirements** (`proposalRequirements`): Determines *who* can propose based on token holdings
- **Proposal Threshold** (`proposalThreshold`): Determines *how much* must be paid to create a proposal

Both checks are enforced independently. A user must:
1. Meet the proposal requirements (eligibility)
2. Have sufficient tokens for the proposal threshold (payment)

This separation allows boards to configure:
- High barrier to entry (large `minBalance`) with low proposal cost
- Low barrier to entry with high proposal cost
- Any combination that fits the community's needs
