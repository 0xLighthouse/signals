---
title: "Board Configuration"
weight: 1
---

# Board Configuration

Configure your Signals board parameters during initialization. All settings are immutable after deployment to ensure transparent, predictable governance.

## Overview

Boards are configured via the `SignalsConfig` struct during initialization:

```solidity
SignalsConfig memory config = SignalsConfig({
    version: "1.0",
    owner: msg.sender,
    underlyingToken: address(token),
    proposalThreshold: 50_000 * 1e18,
    acceptanceThreshold: 100_000 * 1e18,
    maxLockIntervals: 365,
    proposalCap: 100,
    lockInterval: 1 days,
    decayCurveType: 0,
    decayCurveParameters: new uint256[](1),
    proposalRequirements: ProposalRequirements({
        requirementType: ProposalRequirementType.MinBalance,
        minBalance: 10_000 * 1e18,
        minHoldingDuration: 0
    }),
    releaseLockDuration: 7 days
});

signals.initialize(config);
```

## Proposal Requirements

Control who can create new initiatives based on token holdings.

### Requirement Types

#### None

No restrictions - anyone with sufficient tokens to meet the `proposalThreshold` can propose initiatives.

**Use case:** Open, permissionless boards where you want maximum participation.

```solidity
ProposalRequirements({
    requirementType: ProposalRequirementType.None,
    minBalance: 0,
    minHoldingDuration: 0
})
```

#### MinBalance

Users must hold a minimum token balance to propose initiatives. The balance check happens at the time of proposal.

**Use case:** Boards that want to ensure proposers have skin in the game.

```solidity
ProposalRequirements({
    requirementType: ProposalRequirementType.MinBalance,
    minBalance: 10_000 * 1e18,  // 10,000 tokens
    minHoldingDuration: 0
})
```

**Notes:**
- Works with any ERC20 token
- Balance check is separate from `proposalThreshold`

#### MinBalanceAndDuration

Users must hold a minimum token balance for a minimum duration (measured in blocks) before they can propose.

**Use case:** Prevent flash-loan attacks or ensure proposers are long-term community members.

```solidity
ProposalRequirements({
    requirementType: ProposalRequirementType.MinBalanceAndDuration,
    minBalance: 10_000 * 1e18,  // 10,000 tokens
    minHoldingDuration: 50400   // ~7 days at 12s blocks
})
```

**Notes:**
- **Requires ERC20Votes tokens** - Must implement the `IVotes` interface with checkpoint functionality
- Standard ERC20 tokens will revert

### Relationship to Proposal Threshold

Proposal requirements and proposal threshold serve different purposes:

- **Proposal Requirements** (`proposalRequirements`): Determines *who* can propose based on token holdings
- **Proposal Threshold** (`proposalThreshold`): Determines *how much* must be paid to create a proposal

Both checks are enforced independently.

## Release Timelock

Control when supporters can withdraw their locked tokens after initiative acceptance.

### Configuration Options

#### Immediate Release (Default)

Set `releaseLockDuration` to `0` for immediate token release upon acceptance:

```solidity
releaseLockDuration: 0  // Tokens immediately withdrawable
```

**Use case:** Maximum capital efficiency, no coordination window needed

#### Timelocked Release

Set `releaseLockDuration` to any duration (in seconds) to delay withdrawals:

```solidity
releaseLockDuration: 7 days   // 7-day cooling-off period
releaseLockDuration: 30 days  // 30-day coordination window
```

**Use cases:**
- Cooling-off periods to prevent immediate sell pressure
- Coordination windows for governance actions
- Vesting-style token releases
- Risk mitigation for high-value initiatives

### Withdrawal Flow

When an initiative is accepted:

1. Initiative state changes to `Accepted`
2. Acceptance timestamp recorded
3. Supporters can withdraw after `acceptanceTimestamp + releaseLockDuration`

```solidity
// Check if tokens are withdrawable
Initiative memory initiative = signals.getInitiative(initiativeId);
if (initiative.state == InitiativeState.Accepted) {
    uint256 releaseTime = initiative.acceptanceTimestamp + releaseLockDuration;
    if (block.timestamp >= releaseTime) {
        signals.redeem(tokenId);  // Withdrawable
    }
}
```

**Important:** Expired initiatives bypass the release timelock. Tokens from expired initiatives are always immediately withdrawable.

## Board Closure

The board owner can permanently close the board using `closeBoard()`. This is an **irreversible action** that serves as an emergency exit or end-of-season cleanup.

### Closing a Board

```solidity
// Only callable by board owner
signals.closeBoard();
```

### Effects of Closure

When a board is closed:

1. **All locks become immediately withdrawable**, overriding:
   - Initiative state (Proposed, Accepted, or Expired)
   - Release timelock settings
   - Original lock duration

2. **No new proposals allowed** - `proposeInitiative()` and `proposeInitiativeWithLock()` revert
3. **No new support allowed** - `supportInitiative()` reverts
4. **Board state permanently set to Closed** - Cannot be reopened

### Use Cases

- **Emergency situations**: Quickly return all funds if issues are discovered
- **Season end**: Clean shutdown when transitioning to a new board
- **Migration**: Move to upgraded contract version
- **Governance decision**: Community votes to sunset the board

## Configuration Parameters

### Core Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `version` | `string` | Contract version identifier |
| `owner` | `address` | Board owner address (can accept/expire initiatives and close board) |
| `underlyingToken` | `address` | ERC20 token used for locking and voting |
| `proposalThreshold` | `uint256` | Tokens required to propose an initiative |
| `acceptanceThreshold` | `uint256` | Weight required for initiative acceptance |

### Lock Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `maxLockIntervals` | `uint256` | Maximum lock duration in intervals |
| `lockInterval` | `uint256` | Duration of one interval (e.g., 1 day) |
| `proposalCap` | `uint256` | Maximum active proposals per user |

### Decay Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `decayCurveType` | `uint256` | Decay function (0 = linear, 1 = exponential) |
| `decayCurveParameters` | `uint256[]` | Parameters for decay calculation |

### Governance Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `proposalRequirements` | `ProposalRequirements` | Who can propose initiatives |
| `releaseLockDuration` | `uint256` | Token lock duration after acceptance (0 = immediate) |

## Interface

### Data Structures

```solidity
enum ProposalRequirementType {
    None,                    // No requirements
    MinBalance,              // Requires minimum token balance
    MinBalanceAndDuration    // Requires min balance held for min duration
}

struct ProposalRequirements {
    ProposalRequirementType requirementType;
    uint256 minBalance;           // Minimum tokens required
    uint256 minHoldingDuration;   // Minimum blocks to hold tokens
}

enum BoardState {
    Open,    // Board accepting proposals and support
    Closed   // Board permanently closed, all locks withdrawable
}
```

### Functions

#### getProposalRequirements()

Returns the current proposal requirements configuration.

```solidity
function getProposalRequirements()
    external
    view
    returns (ProposalRequirements memory);
```

#### canPropose(address)

Checks if an address meets the proposal requirements.

```solidity
function canPropose(address proposer)
    public
    view
    returns (bool);
```

#### closeBoard()

Permanently closes the board, making all locks immediately withdrawable.

```solidity
function closeBoard() external onlyOwner;
```

## Examples

### Open Community Board

```solidity
SignalsConfig({
    owner: msg.sender,
    underlyingToken: address(token),
    proposalThreshold: 1000 * 1e18,
    acceptanceThreshold: 100_000 * 1e18,
    maxLockIntervals: 365,
    proposalCap: 10,
    lockInterval: 1 days,
    decayCurveType: 0,
    decayCurveParameters: [9e17], // 0.9 linear decay
    proposalRequirements: ProposalRequirements({
        requirementType: ProposalRequirementType.None,
        minBalance: 0,
        minHoldingDuration: 0
    }),
    releaseLockDuration: 0  // Immediate release
})
```

### Conservative Governance Board

```solidity
SignalsConfig({
    owner: msg.sender,
    underlyingToken: address(governanceToken),
    proposalThreshold: 50_000 * 1e18,
    acceptanceThreshold: 500_000 * 1e18,
    maxLockIntervals: 365,
    proposalCap: 5,
    lockInterval: 1 days,
    decayCurveType: 0,
    decayCurveParameters: [11e17], // 1.1 linear decay
    proposalRequirements: ProposalRequirements({
        requirementType: ProposalRequirementType.MinBalanceAndDuration,
        minBalance: 100_000 * 1e18,
        minHoldingDuration: 50400  // ~7 days
    }),
    releaseLockDuration: 7 days  // 7-day cooling-off period
})
```

## Error Handling

### Proposal Requirements Not Met

```solidity
error ProposalRequirementsNotMet(string reason);
```

**Possible reasons:**
- `"Insufficient token balance for proposal"`
- `"Tokens not held long enough"`
- `"Token does not support holding duration checks"`

### Release Timelock

```solidity
error InvalidInitiativeState("Tokens still locked after acceptance");
```

Thrown when attempting to withdraw before the release timelock expires.

### Board Closed

```solidity
error BoardClosedError();
```

Thrown when attempting to propose or support initiatives on a closed board.

## Best Practices

### Proposal Requirements

- **Open boards**: Use `None` to maximize participation
- **Serious governance**: Use `MinBalance` (100k+ tokens)
- **Long-term focus**: Use `MinBalanceAndDuration` with ERC20Votes tokens

### Release Timelock

- **High velocity**: Use `0` for immediate release
- **Coordination needed**: Use 7-30 days
- **Vesting approach**: Use 30+ days

### Board Closure

**Use for:**
- Emergency situations
- End of governance season
- Contract migrations

**Don't use for:**
- Temporary issues
- Single initiative disputes
- Preventing specific withdrawals

## Immutability

**All configuration parameters are immutable after initialization.** Choose carefully based on your community's governance needs. The only exception is the board owner's ability to close the board via `closeBoard()`.
