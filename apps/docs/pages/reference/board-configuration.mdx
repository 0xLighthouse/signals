---
title: "BoardConfig"
weight: 2
---

# Board Configuration

There are over 100 ways a Signals board can be configured to suit your orginsations needs.

## Overview

Boards are configured via the `BoardConfig` struct during initialization:

```solidity
BoardConfig memory config = BoardConfig({
    version: "1.0",
    owner: msg.sender,
    underlyingToken: address(token),
    acceptanceThreshold: 100_000 * 1e18,
    maxLockIntervals: 365,
    proposalCap: 100,
    lockInterval: 1 days,
    decayCurveType: 0,
    decayCurveParameters: new uint256[](1),
    proposerRequirements: ProposerRequirements({
        eligibilityType: EligibilityType.MinBalance,
        minBalance: 10_000 * 1e18,
        minHoldingDuration: 0,
        threshold: 50_000 * 1e18
    }),
    participantRequirements: ParticipantRequirements({
        eligibilityType: EligibilityType.None,
        minBalance: 0,
        minHoldingDuration: 0
    }),
    releaseLockDuration: 7 days
});

signals.initialize(config);
```

#### MinBalanceAndDuration

Users must hold a minimum token balance for a minimum duration (measured in blocks) before they can propose.

**Use case:** Prevent flash-loan attacks or ensure proposers are long-term community members.

```solidity
ProposerRequirements({
    eligibilityType: EligibilityType.MinBalanceAndDuration,
    minBalance: 10_000 * 1e18,  // 10,000 tokens
    minHoldingDuration: 50400,  // ~7 days at 12s blocks
    threshold: 1_000 * 1e18
})
```

**Notes:**

- **Requires ERC20Votes tokens** - Must implement the `IVotes` interface with checkpoint functionality
- Standard ERC20 tokens will revert

### Relationship to Threshold

Proposer requirements serve two purposes:

- **Eligibility** (`eligibilityType`, `minBalance`, `minHoldingDuration`): Determines *who* can propose based on token holdings
- **Threshold** (`threshold`): Determines *how much* must be locked when creating a proposal

Both checks are enforced independently. The `threshold` amount is locked and contributes to the initiative's weight.

## Release Timelock

Control when supporters can withdraw their locked tokens after initiative acceptance.

### Configuration Options

#### Immediate Release (Default)

Set `releaseLockDuration` to `0` for immediate token release upon acceptance:

```solidity
releaseLockDuration: 0  // Tokens immediately withdrawable
```

**Use case:** Maximum capital efficiency, no coordination window needed

#### Timelocked Release

Set `releaseLockDuration` to any duration (in seconds) to delay withdrawals:

```solidity
releaseLockDuration: 7 days   // 7-day cooling-off period
releaseLockDuration: 30 days  // 30-day coordination window
```

**Use cases:**

- Cooling-off periods to prevent immediate sell pressure
- Coordination windows for governance actions
- Vesting-style token releases
- Risk mitigation for high-value initiatives

### Withdrawal Flow

When an initiative is accepted:

1. Initiative state changes to `Accepted`
2. Acceptance timestamp recorded
3. Supporters can withdraw after `acceptanceTimestamp + releaseLockDuration`

```solidity
// Check if tokens are withdrawable
Initiative memory initiative = signals.getInitiative(initiativeId);
if (initiative.state == InitiativeState.Accepted) {
    uint256 releaseTime = initiative.acceptanceTimestamp + releaseLockDuration;
    if (block.timestamp >= releaseTime) {
        signals.redeem(tokenId);  // Withdrawable
    }
}
```

**Important:** Expired initiatives bypass the release timelock. Tokens from expired initiatives are always immediately withdrawable.

## Board Closure

The board owner can permanently close the board using `closeBoard()`. This is an **irreversible action** that serves as an emergency exit or end-of-season cleanup.

### Closing a Board

```solidity
// Only callable by board owner
signals.closeBoard();
```

### Effects of Closure

When a board is closed:

1. **All locks become immediately withdrawable**, overriding:
   - Initiative state (Proposed, Accepted, or Expired)
   - Release timelock settings
   - Original lock duration

2. **No new proposals allowed** - `proposeInitiative()` and `proposeInitiativeWithLock()` revert
3. **No new support allowed** - `supportInitiative()` reverts
4. **Board state permanently set to Closed** - Cannot be reopened

### Use Cases

- **Emergency situations**: Quickly return all funds if issues are discovered
- **Season end**: Clean shutdown when transitioning to a new board
- **Migration**: Move to upgraded contract version
- **Governance decision**: Community votes to sunset the board

## Configuration Parameters

### Core Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `version` | `string` | Contract version identifier |
| `owner` | `address` | Board owner address (can accept/expire initiatives and close board) |
| `underlyingToken` | `address` | ERC20 token used for locking and voting |
| `acceptanceThreshold` | `uint256` | Weight required for initiative acceptance |

### Lock Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `maxLockIntervals` | `uint256` | Maximum lock duration in intervals |
| `lockInterval` | `uint256` | Duration of one interval (e.g., 1 day) |
| `proposalCap` | `uint256` | Maximum active proposals per user |

### Decay Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `decayCurveType` | `uint256` | Decay function (0 = linear, 1 = exponential) |
| `decayCurveParameters` | `uint256[]` | Parameters for decay calculation |

### Governance Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `proposerRequirements` | `ProposerRequirements` | Who can propose initiatives and how much they must lock |
| `participantRequirements` | `ParticipantRequirements` | Who can support initiatives |
| `releaseLockDuration` | `uint256` | Token lock duration after acceptance (0 = immediate) |

### Functions

#### getProposerRequirements()

Returns the current proposer requirements configuration.

```solidity
function getProposerRequirements()
    external
    view
    returns (ProposerRequirements memory);
```

#### getParticipantRequirements()

Returns the current participant requirements configuration.

```solidity
function getParticipantRequirements()
    external
    view
    returns (ParticipantRequirements memory);
```

#### canPropose(address)

Checks if an address meets the proposal requirements.

```solidity
function canPropose(address proposer)
    public
    view
    returns (bool);
```

#### closeBoard()

Permanently closes the board, making all locks immediately withdrawable.

```solidity
function closeBoard() external onlyOwner;
```

## Examples

### Open Community Board

```solidity
BoardConfig({
    version: "1.0",
    owner: msg.sender,
    underlyingToken: address(token),
    acceptanceThreshold: 100_000 * 1e18,
    maxLockIntervals: 365,
    proposalCap: 10,
    lockInterval: 1 days,
    decayCurveType: 0,
    decayCurveParameters: [9e17], // 0.9 linear decay
    proposerRequirements: ProposerRequirements({
        eligibilityType: EligibilityType.None,
        minBalance: 0,
        minHoldingDuration: 0,
        threshold: 1000 * 1e18
    }),
    participantRequirements: ParticipantRequirements({
        eligibilityType: EligibilityType.None,
        minBalance: 0,
        minHoldingDuration: 0
    }),
    releaseLockDuration: 0  // Immediate release
})
```

### Conservative Governance Board

```solidity
BoardConfig({
    version: "1.0",
    owner: msg.sender,
    underlyingToken: address(governanceToken),
    acceptanceThreshold: 500_000 * 1e18,
    maxLockIntervals: 365,
    proposalCap: 5,
    lockInterval: 1 days,
    decayCurveType: 0,
    decayCurveParameters: [11e17], // 1.1 linear decay
    proposerRequirements: ProposerRequirements({
        eligibilityType: EligibilityType.MinBalanceAndDuration,
        minBalance: 100_000 * 1e18,
        minHoldingDuration: 50400,  // ~7 days
        threshold: 50_000 * 1e18
    }),
    participantRequirements: ParticipantRequirements({
        eligibilityType: EligibilityType.MinBalance,
        minBalance: 10_000 * 1e18,
        minHoldingDuration: 0
    }),
    releaseLockDuration: 7 days  // 7-day cooling-off period
})
```

## Error Handling

### Proposal Requirements Not Met

```solidity
error ProposerRequirementsNotMet(string reason);
```

**Possible reasons:**

- `"Insufficient token balance for proposal"`
- `"Tokens not held long enough"`
- `"Token does not support holding duration checks"`

### Participant Requirements Not Met

```solidity
error ParticipantRequirementsNotMet(string reason);
```

**Possible reasons:**

- `"Insufficient token balance to participate"`
- `"Tokens not held long enough"`
- `"Token does not support holding duration checks"`

### Release Timelock

```solidity
error InvalidInitiativeState("Tokens still locked after acceptance");
```

Thrown when attempting to withdraw before the release timelock expires.

### Board Closed

```solidity
error BoardClosedError();
```

Thrown when attempting to propose or support initiatives on a closed board.

## Best Practices

### Proposal Requirements

- **Open boards**: Use `None` to maximize participation
- **Serious governance**: Use `MinBalance` (100k+ tokens)
- **Long-term focus**: Use `MinBalanceAndDuration` with ERC20Votes tokens

### Release Timelock

- **High velocity**: Use `0` for immediate release
- **Coordination needed**: Use 7-30 days
- **Vesting approach**: Use 30+ days

### Board Closure

**Use for:**

- Emergency situations
- End of governance season
- Contract migrations

**Don't use for:**

- Temporary issues
- Single initiative disputes
- Preventing specific withdrawals

## Immutability

**All configuration parameters are immutable after initialization.** Choose carefully based on your community's governance needs. The only exception is the board owner's ability to close the board via `closeBoard()`.
